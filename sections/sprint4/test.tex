\section{Test}
In this section a full test of the system will be performed.
The test will be an acceptance test, and will seek to verify if the requirement set in the beginning of the project.
The acceptance test will be designed to test the whole system with some manual generated data.
The scope of the test will be to test the Must-have requirements form Section \ref{sec:req}.
Some retirements is verified working in previous tests, these can be omitted form the acceptance test, if so, this will be accounted for. 

The Must, have requirements from Section \ref{sec:req}, firstly the functional; Graphical user interface, User accounts including login and registration, Communication with the \gls{astep} system, User location tracking and storage, Automatically determine regular routes, Automatic suggest ride sharing partners. The two nonfunctional requirements are; Development cooperation with the other \gls{astep} project groups, User privacy.

User location tracking and storage, as well a automatic determining regular routes are both fully verified in respectively Section \ref{subsec:bgstest} and \ref{subsec:algotest}, the latter also partly accounting for the requirement suggesting ride partners the only thing missing for this requirement, is to check whether they are shown correctly to an user of the app. 
The nonfunctional requirement of development cooperation is accounted for in Section \ref{refhere}\todo{fix this todo}, thus we need an acceptance test which can test if the following requirements is upheld. 
\begin{itemize}
	\item Graphical user interface
	\item User accounts, including login and registration
	\item Communication with the \gls{astep} system
	\item Showing users their ridesharing matches in the app
	\item User privacy
\end{itemize}

\subsection{Acceptance Test Design}
Firstly some test data will be added to the \gls{rs} server's database, the content can be seen in Appendix \ref{app:datadump}.

These data have is a combination of data pulled form the \gls{astep} database as well s some data we have designed ourselves to generate matches for th user \texttt{test}.
THe setup will consist of a computer running an instance of the \gls{rs} server and an android emulator.

The first task consist of opening the app, and registering a new user. If this succeeds the user should then log out again and then log in with the user \texttt{test} accompanied by the password \texttt{test}.
When the user logs into the app again the appropriate matches stored in \gls{rs} database, should be downloaded to and viewed in the app.
If the lists are shown for the user \texttt{test} but not for the newly registered user, the overall test are completed. 

The GUI will have been tested through availability of the different functions in the app, the user functionality will be tested when registering an user an logging in, this will also partly test the communication with the \gls{astep} system.
The rest of the requirement pertaining communication with \gls{astep} are verified in the earlier tests.
If the matches is correctly pulled from the \gls{rs} server and showed to the user will be tested when the user \texttt{test} are logged in.
The requirement concerning user privacy is tested be seeing if location data about other users are displayed to the user currently logged in. 


\subsection{Performing the Test}
First a new user, \texttt{user22} was created as can be seen in Figure \ref{s4tp:newuser}.
In the process of creating a new user, some unexpected behavior regarding scandinavian charterers.
Some additional tests were performed which can be seen in Table \ref{tab:logintest}.
\begin{table}[!ht]
	\centering
	\begin{tabular}{@{}lll@{}}
		Username & Password & Result \\
		\hline
		a & a & 200 OK\\
		ø & ø & 404 not found\\
		å & a & 404 not found\\
		b & å & 401 unauthorized\\
	\end{tabular}
	\caption{Registered users login test.}
	\label{tab:logintest}
\end{table}
Some additional \gls{astep} API test leads us to believe that this is an problem in the android app.

The registering of the user \texttt{user22} was successful and as can be seen in the right side of Figure \ref{s4tp:numain}, as expected no matches were shown to this newly registered user. 
The user were then logged out.
The user \texttt{test} were then, as seen in Figure \ref{s4tp:logintest}, logged in successful, and redirected to the main interface of the, where the user was presented with all the appropriate matches as shown in \ref{s4tp:testmain}.
\begin{figure}[!htb]
    \centering
    \begin{minipage}{.25\textwidth}
        \centering
        \includegraphics[width=0.3\linewidth, height=0.15\textheight]{figures/s4test/newuser.png}
        \caption{$dt=0.1$}
        \label{s4tp:newuser}
    \end{minipage}%
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[width=0.3\linewidth, height=0.15\textheight]{figures/s4test/newusermain.png}
        \caption{$dt =$}
        \label{s4tp:numain}
    \end{minipage}
\end{figure}



%% one huge shit tack
\iffalse
\section{Acceptance Test}
% metatext for test section
This section will contain descriptions and documentation of an informal acceptance test performed on the whole \gls{rs} solution in the fourth sprint.
The tests are the final tests on the solution, and will serve as a full system test and as the basis for the solution and project evaluation.
The complete system structure can be perceived as an graph, where the app and servers are the vertices while the communication can be seen as the edges. 
For a full acceptance of the app, every edge and vertex in the considered graph must be evaluated. 
Even though not every elements described in this section are described in the previous implementation sections, they are considered as they are part of the solution.

The tests are performed informally. 
However, the tests yield practical implementation results, and reflect the functionality of the solution.
For the system to pass the acceptance test it must as a minimum fulfill the Must-have requirements which were defined in Section \ref{sec:req}, these the one below.
Firstly the functional requirements.
\begin{itemize}
	\item Graphical user interface
	\item User accounts, including login and registration
	\item Communication with the \gls{astep} system
	\item User location tracking and storage
	\item Automatically determine regular routes
	\item Automatic suggest ride sharing partners
\end{itemize}
In addition to the two non-functional Must-have requirements;
\begin{itemize}
	\item Development cooperation with the other \gls{astep} project groups
	\item User privacy
\end{itemize}
Some of these requirements are fulfilled by a single part of the system while other is satisfied by two or more subparts of the system and some fulfilled by the system as a whole.
\subsection{\gls{rs} App}
The app itself should fulfill many of the Must-have requirements.
The Must-have requirements which the app itself must satisfy are the GUI and location tracking requirements, while it is represent a part of the rest of the functional requirements and the non-functional requirement concerning privacy.
\textbf{Background location gathering}\\
The background location caching test was performed in Section \ref{subsec:bgstest2} in sprint 3, and was evaluated being fully functional, and will not be tested further here.
\textbf{Graphical User Interface}
The app implements an graphical user interface which allows access for the other functionality described in the requirements and is thereby considered fulfilled.
The GUI also supports the fulfillment of some of the other requirements, by supporting this functionality though the GUI of the app.
These are the requirements regarding the user account functionality and suggesting ridesharing partners.

\subsection{\gls{astep}}
Our contribution to the \gls{astep} system was the matching algorithm pseudo code, and a modified version of this which detects routes on the server as regular routes.
The matching algorithm was tested in sprint 3 and evaluated as sufficient for the solution a the current state, although missing a more comprehensive test with actual user routes.
The test performed in sprint 3 of the \gls{astep} route system also verified the requirement of automatically determine regular routes and therefore these two requirements pertaining to \gls{astep} are also considered completed.

\subsection{\gls{rs} Server}
Our own server have two main functions, fetching matches and allowing us to store additional user data.
\textbf{Math Storage}\\
The fetching and storage works as intended on the server. 
\textbf{User Data}\\
works quite well, preferably.

\textbf{another tested category}\\
assumed working!


\subsection{App - \gls{astep} Communication}
\textbf{Route push}\\
Pushing routes with around 10 values is working correctly, as presented in the location gathering test in Section \ref{subsec:bgstest2}.
The \gls{astep} system is, however, limited by a 2000\todo{check} character limit for the URL length.
This limits the length of the supported routes to push to \gls{astep} to around 60\todo{check} locations in a route.

\textbf{Register new user}\\
Registering a user with English letters is tested and performs as expected.

\textbf{Login}\\
Calling the \gls{astep} API with the correct arguments yield an ok signal and a token.
The token is successfully utilized to authorize other API calls.

However, there are problems logging in with passwords and usernames containing Scandinavian letters, as can be seen in Table \ref{tab:logintest}.

This seems to be a problem with Android not incorporating the mentioned letters as standard, because the \gls{astep} website API responds positively for the tested values.
This is a usability problem with the \gls{rs} app, and could be solved by implementing the support of international letters.

\begin{table}[!ht]
	\centering
	\begin{tabular}{@{}lll@{}}
		Username & Password & Result \\
		\hline
		a & a & 200 OK\\
		ø & ø & 404 not found\\
		å & a & 404 not found\\
		b & å & 401 unauthorized\\
	\end{tabular}
	\caption{Registered users login test.}
	\label{tab:logintest}
\end{table}


\subsection{RideShare Server - aSTEP Communication}
The action performed between the \gls{rs} server and \gls{astep} is to receive route matches.
It works as intended.


\subsection{App - \gls{rs} Server Communication}
\textbf{Get matches}\\
The \gls{rs} app receives matches goodly.

\textbf{Store extra data to new user}\\
Is working in beta as of May 16th.
\fi