% Divided into structual & behavioal design
\subsubsection{Structual Design}
In the server, we need some way of manipulating and analysing routes.
This includes the route class itself and a way to promote the class to a stable route.

A StableRoute is a route which occurs on a regular basis, i.e. the probability of the user takeing that specific route after a predetermined time is high.
Currently, the app is focused on commuters that travels on a weekly basis.

\begin{tikzpicture}[auto,
	class/.style = {draw, rectangle split, rectangle split parts=3, drop shadow, fill=white, font=\footnotesize},
	interface/.style = {class, rectangle split parts=2},
	generalization/.style = {-open triangle 60}
]
	\node[class](Route){Route 
		\nodepart[align=left, text width=6.3cm]{two}
			-id : Integer\\
			-user : UserInfo\\
			-points : Location[]
		\nodepart[align=left, text width=6.3cm]{three}
			+Route(user : UserInfo, points : Location[])\\
			+getUser() : UserInfo\\
			+getPoint(index : Integer) : Location};
	\node[class, below=of Route](StableRoute){StableRoute
		\nodepart[align=left, text width=6.3cm]{two}
			-days : WeekDays\\
			-departureTime : Time\\
			-arrivalTime : Time
		\nodepart[align=left, text width=6.7cm]{three}
			+StableRoute(route : Route, days : WeekDays)\\
			+getArrivalTime() : Time\\
			+getDepartureTime() : Time};
	\node[class, below=of StableRoute](RouteStabilityAnalyser){RouteStabilityAnalyser
		\nodepart[align=left, text width=4.6cm]{two}
			-isStable : Boolean\\
			-currentRoute : Route
		\nodepart[align=left, text width=4.6cm]{three}
			+getStableRoute() : StableRoute\\
			+analyse(route : Route)};
	\node[class, right=of StableRoute](RouteAnalyser){\textit{RouteAnalyser}
		\nodepart[align=left, text width=3.4cm]{two}
			-id : Integer
		\nodepart[align=left, text width=3.4cm]{three}
			+analyse(route : Route)};
	\node[class, right=of RouteStabilityAnalyser](RouteSimilarityAnalyser){RouteSimilarityAnalyser
		\nodepart[align=left, text width=3.4cm]{three}
			+analyse(route : Route)};
	\node[interface, below=5 cm of RouteAnalyser](RouteComparator){
		\nodepart[align=center, text width=4cm]{one}
		<<interface>>\\
		RouteComparator
		\nodepart[align=left, text width=5.9cm]{two}
			+compare(x : Route, y : Route) : Integer};
	\node[class, below=of RouteComparator](TimeDistanceComparer){TimeDistanceComparer
		\nodepart[align=left, text width=5.9cm]{three}
			+compare(x : Route, y : Route) : Integer};
	
	\draw[generalization] (StableRoute) -- (Route);
	\draw[generalization] (RouteStabilityAnalyser) -- (RouteAnalyser);
	\draw[generalization] (RouteSimilarityAnalyser) -- (RouteAnalyser);
	\draw[generalization, dashed] (TimeDistanceComparer) -- node[font=\scriptsize]{<<realize>>} (RouteComparator);
\end{tikzpicture}